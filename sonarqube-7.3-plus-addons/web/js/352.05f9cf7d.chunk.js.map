{"version":3,"sources":["webpack:///./src/main/js/app/components/PageTracker.tsx"],"names":["PageTracker","_super","_this","apply","this","arguments","trackPage","_a","props","location","trackingId","setTimeout","react_ga__WEBPACK_IMPORTED_MODULE_1__","pathname","__extends","prototype","componentDidMount","componentDidUpdate","prevProps","render","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_exports__","Object","react_router__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_3__","state","_store_rootReducer__WEBPACK_IMPORTED_MODULE_4__","value"],"mappings":"wdA+BAA,EAAA,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YAAAD,YAiBEF,EAAAI,UAAY,WACJ,IAAAC,EAAAL,EAAAM,MAAEC,EAAAF,EAAAE,SAAUF,EAAAG,YAGhBC,WAAW,WAAM,OAAAC,EAAA,SAAyBH,EAAzBI,WAA6C,QAOpE,OA5BiCC,EAAAd,EAAAC,GAC/BD,EAAAe,UAAAC,kBAAA,WACMZ,KAAKI,MAAME,aACbE,EAAA,WAA2BR,KAAKI,MAAME,YACtCN,KAAKE,cAITN,EAAAe,UAAAE,mBAAA,SAAmBC,GACGd,KAAKI,MAAMC,SAASI,WACvBK,EAAUT,SAASI,UAGlCT,KAAKE,aAYTN,EAAAe,UAAAI,OAAA,WACE,OAAO,MAEXnB,EA5BA,CAAiCoB,EAAA,eAkCjCC,EAAA,QAAeC,OAAAC,EAAA,WAAf,CAA8BD,OAAAE,EAAA,QAAAF,CAJN,SAACG,GAA2B,OAClDf,YAAaY,OAAAI,EAAA,sBAAAJ,CAAsBG,EAAO,mCAAqCE,QAGnDL,CAAqCtB","file":"js/352.05f9cf7d.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as GoogleAnalytics from 'react-ga';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { getGlobalSettingValue } from '../../store/rootReducer';\n\ninterface StateProps {\n  trackingId?: string;\n}\n\ntype Props = WithRouterProps & StateProps;\n\nexport class PageTracker extends React.PureComponent<Props> {\n  componentDidMount() {\n    if (this.props.trackingId) {\n      GoogleAnalytics.initialize(this.props.trackingId);\n      this.trackPage();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const currentPage = this.props.location.pathname;\n    const prevPage = prevProps.location.pathname;\n\n    if (currentPage !== prevPage) {\n      this.trackPage();\n    }\n  }\n\n  trackPage = () => {\n    const { location, trackingId } = this.props;\n    if (trackingId) {\n      // More info on the \"title and page not in sync\" issue: https://github.com/nfl/react-helmet/issues/189\n      setTimeout(() => GoogleAnalytics.pageview(location.pathname), 500);\n    }\n  };\n\n  render() {\n    return null;\n  }\n}\n\nconst mapStateToProps = (state: any): StateProps => ({\n  trackingId: (getGlobalSettingValue(state, 'sonar.analytics.trackingId') || {}).value\n});\n\nexport default withRouter<{}>(connect<StateProps>(mapStateToProps)(PageTracker));\n"],"sourceRoot":""}