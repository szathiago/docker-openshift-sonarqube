(window.webpackJsonp=window.webpackJsonp||[]).push([[354],{1541:function(e,t,n){"use strict";n.r(t);var r,a=n(534),i=n(538),c=n(557),o=n.n(c),s=n(544),l=n(535),u=n(541),p=n(529),m=n(641),f=n(865),d=n(960),g=n(779),h=n(536),v=n(7),b=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={openRestart:!1},t.handleOpenRestart=function(){t.setState({openRestart:!0})},t.hanleCloseRestart=function(){t.setState({openRestart:!1})},t.handleRevert=function(){Object(g.a)().then(t.props.refreshPending,function(){})},t}return b(t,e),t.prototype.render=function(){var e=this.props.pending,t=e.installing,n=e.updating,r=e.removing;return t.length||n.length||r.length?a.createElement(f.a,{className:"alert alert-info js-pending"},a.createElement("span",{className:"little-spacer-right"},a.createElement(m.a,{message:Object(v.l)("marketplace.instance_needs_to_be_restarted_to")})),[{length:t.length,msg:"marketplace.install_x_plugins"},{length:n.length,msg:"marketplace.update_x_plugins"},{length:r.length,msg:"marketplace.uninstall_x_plugins"}].filter(function(e){return e.length>0}).map(function(e,t){var n=e.length,r=e.msg;return a.createElement("span",{key:r},t>0&&"; ",a.createElement(p.FormattedMessage,{defaultMessage:Object(v.l)(r),id:r,values:{nb:a.createElement("strong",null,n)}}))}),a.createElement(h.a,{className:"spacer-left js-restart",onClick:this.handleOpenRestart},Object(v.l)("marketplace.restart")),a.createElement(h.a,{className:"spacer-left js-cancel-all button-red",onClick:this.handleRevert},Object(v.l)("marketplace.revert")),this.state.openRestart&&a.createElement(d.a,{onClose:this.hanleCloseRestart})):null},t}(a.PureComponent),O=n(542),y=n(867),j=n(556),_=n(828),N=n(563),k=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderExtension=function(e){var t=e.key,n=e.name;return a.createElement("li",{key:t},a.createElement(u.Link,{activeClassName:"active",to:"/admin/extension/"+t},n))},t}return k(t,e),t.prototype.isSomethingActive=function(e){var t=window.location.pathname;return e.some(function(e){return 0===t.indexOf(window.baseUrl+e)})},t.prototype.isSecurityActive=function(){return this.isSomethingActive(["/admin/users","/admin/groups","/admin/permissions","/admin/permission_templates"])},t.prototype.isProjectsActive=function(){return this.isSomethingActive(["/admin/projects_management","/admin/background_tasks"])},t.prototype.isSystemActive=function(){return this.isSomethingActive(["/admin/system"])},t.prototype.isMarketplace=function(){return this.isSomethingActive(["/admin/marketplace"])},t.prototype.renderConfigurationTab=function(){var e=this,t=this.props.organizationsEnabled,n=this.props.extensions.filter(function(e){return"license/support"!==e.key});return a.createElement(j.b,{overlay:a.createElement("ul",{className:"menu"},a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/settings"},Object(v.l)("settings.page"))),a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/settings/encryption"},Object(v.l)("property.category.security.encryption"))),a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/custom_metrics"},Object(v.l)("custom_metrics.page"))),!t&&a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/webhooks"},Object(v.l)("webhooks.page"))),n.map(this.renderExtension)),tagName:"li"},function(t){var n=t.onToggleClick,r=t.open;return a.createElement("a",{"aria-expanded":String(r),"aria-haspopup":"true",className:l("dropdown-toggle",{active:r||!e.isSecurityActive()&&!e.isProjectsActive()&&!e.isSystemActive()&&!e.isSomethingActive(["/admin/extension/license/support"])&&!e.isMarketplace()}),href:"#",id:"settings-navigation-configuration",onClick:n},Object(v.l)("sidebar.project_settings"),a.createElement(N.a,{className:"little-spacer-left"}))})},t.prototype.renderProjectsTab=function(){var e=this,t=this.props.organizationsEnabled;return a.createElement(j.b,{overlay:a.createElement("ul",{className:"menu"},!t&&a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/projects_management"},Object(v.l)("management"))),a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/background_tasks"},Object(v.l)("background_tasks.page")))),tagName:"li"},function(t){var n=t.onToggleClick,r=t.open;return a.createElement("a",{"aria-expanded":String(r),"aria-haspopup":"true",className:l("dropdown-toggle",{active:r||e.isProjectsActive()}),href:"#",onClick:n},Object(v.l)("sidebar.projects"),a.createElement(N.a,{className:"little-spacer-left"}))})},t.prototype.renderSecurityTab=function(){var e=this,t=this.props.organizationsEnabled;return a.createElement(j.b,{overlay:a.createElement("ul",{className:"menu"},a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/users"},Object(v.l)("users.page"))),!t&&a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/groups"},Object(v.l)("user_groups.page"))),!t&&a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/permissions"},Object(v.l)("global_permissions.page"))),!t&&a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/permission_templates"},Object(v.l)("permission_templates")))),tagName:"li"},function(t){var n=t.onToggleClick,r=t.open;return a.createElement("a",{"aria-expanded":String(r),"aria-haspopup":"true",className:l("dropdown-toggle",{active:r||e.isSecurityActive()}),href:"#",onClick:n},Object(v.l)("sidebar.security"),a.createElement(N.a,{className:"little-spacer-left"}))})},t.prototype.render=function(){var e,t=this.props,n=t.extensions,r=t.pendingPlugins,i=n.find(function(e){return"license/support"===e.key});return r.installing.length+r.removing.length+r.updating.length>0&&(e=a.createElement(E,{pending:r,refreshPending:this.props.fetchPendingPlugins})),a.createElement(y.a,{height:e?O.contextNavHeightRaw+30:O.contextNavHeightRaw,id:"context-navigation",notif:e},a.createElement("header",{className:"navbar-context-header"},a.createElement("h1",null,Object(v.l)("layout.settings"))),a.createElement(_.a,null,this.renderConfigurationTab(),this.renderSecurityTab(),this.renderProjectsTab(),a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/system"},Object(v.l)("sidebar.system"))),a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/marketplace"},Object(v.l)("marketplace.page"))),i&&a.createElement("li",null,a.createElement(u.IndexLink,{activeClassName:"active",to:"/admin/extension/license/support"},Object(v.l)("support")))))},t.defaultProps={extensions:[]},t}(a.PureComponent),S=n(545),x=n(833),C=n(677),w=n(959),A=n(672),R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fetchNavigationSettings=function(){return Object(x.d)().then(function(e){return t.props.setAdminPages(e.extensions)},function(){})},t}return R(t,e),t.prototype.componentDidMount=function(){this.context.canAdmin?this.fetchNavigationSettings():Object(A.a)()},t.prototype.render=function(){var e=this.props.appState,t=e.adminPages,n=e.organizationsEnabled;if(!t)return null;var r=Object(v.l)("layout.settings");return a.createElement("div",null,a.createElement(o.a,{defaultTitle:r,titleTemplate:"%s - "+r}),a.createElement(P,{extensions:t,fetchPendingPlugins:this.props.fetchPendingPlugins,location:this.props.location,organizationsEnabled:n,pendingPlugins:this.props.pendingPlugins}),this.props.children)},t.contextTypes={canAdmin:i.bool.isRequired},t}(a.PureComponent),I={fetchPendingPlugins:w.a,setAdminPages:C.d};t.default=Object(s.connect)(function(e){return{appState:Object(S.getAppState)(e),pendingPlugins:Object(S.getMarketplacePendingPlugins)(e)}},I)(L)},548:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(534),a=n(570),i=n(535),c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function o(e){return r.createElement(a,c({className:i("modal",{"modal-medium":e.medium,"modal-large":e.large}),isOpen:!0,overlayClassName:"modal-overlay"},e))}a.setAppElement("#content")},577:function(e,t,n){var r=n(615),a=1/0,i=1.7976931348623157e308;e.exports=function(e){return e?(e=r(e))===a||e===-a?(e<0?-1:1)*i:e==e?e:0:0===e?e:0}},592:function(e,t,n){var r=n(577);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},607:function(e,t){e.exports=function(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}},663:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"h",function(){return c}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"f",function(){return p}),n.d(t,"g",function(){return d});var r,a=n(17),i=n(552);function c(e){return Object(a.post)("/api/system/change_log_level",{level:e}).catch(i.a)}function o(){return Object(a.getJSON)("/api/system/info").catch(i.a)}function s(){return Object(a.getJSON)("/api/system/status")}function l(){return Object(a.getJSON)("/api/system/upgrades")}function u(){return Object(a.getJSON)("/api/system/db_migration_status")}function p(){return Object(a.postJSON)("/api/system/migrate_db")}!function(e){e.RED="RED",e.YELLOW="YELLOW",e.GREEN="GREEN"}(r||(r={}));var m=2e3;function f(){return new Promise(function(e){return function e(t){setTimeout(function(){s().then(function(n){"UP"===n.status?t():e(t)}).catch(function(){return e(t)})},m)}(e)})}function d(){return Object(a.post)("/api/system/restart").catch(i.a).then(f)}},672:function(e,t,n){"use strict";var r=n(637),a=n(643),i=n(677);t.a=function(){var e=Object(r.default)(),t=Object(a.a)(),n=window.location.pathname+window.location.search+window.location.hash;e.dispatch(Object(i.c)()),t.replace({pathname:"/sessions/new",query:{return_to:n}})}},779:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return f}),n.d(t,"f",function(){return d}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return h}),n.d(t,"i",function(){return v}),n.d(t,"a",function(){return b});var r=n(822),a=n.n(r),i=n(17),c=n(552),o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function s(){return Object(i.getJSON)("/api/plugins/available").catch(c.a)}function l(){return Object(i.getJSON)("/api/plugins/pending").catch(c.a)}function u(e){return e?["COMPATIBLE","REQUIRES_SYSTEM_UPGRADE","DEPS_REQUIRE_SYSTEM_UPGRADE"].map(function(t){var n=a()(e,function(e){return e.status===t});return n>-1?e[n]:void 0}).filter(Boolean):[]}function p(e,t){if(!t)return e;var n=t.indexOf(e),r=n>0?t.slice(0,n):[];return o({},e,{previousUpdates:r})}function m(){return Object(i.getJSON)("/api/plugins/installed",{f:"category"}).then(function(e){return e.plugins},c.a)}function f(){return Promise.all([Object(i.getJSON)("/api/plugins/installed",{f:"category"}),Object(i.getJSON)("/api/plugins/updates")]).then(function(e){var t=e[0],n=e[1];return t.plugins.map(function(e){var t=n.plugins.find(function(t){return t.key===e.key});return t?o({},t,e,{updates:u(t.updates).map(function(e){return p(e,t.updates)})}):e})}).catch(c.a)}function d(){return Promise.all([Object(i.getJSON)("/api/plugins/updates"),Object(i.getJSON)("/api/plugins/installed")]).then(function(e){var t=e[0],n=e[1];return t.plugins.map(function(e){var t=u(e.updates).map(function(t){return p(t,e.updates)}),r=n.plugins.find(function(t){return t.key===e.key});return r?o({},r,e,{updates:t}):o({},e,{updates:t})})}).catch(c.a)}function g(e){return Object(i.post)("/api/plugins/install",e).catch(c.a)}function h(e){return Object(i.post)("/api/plugins/uninstall",e).catch(c.a)}function v(e){return Object(i.post)("/api/plugins/update",e).catch(c.a)}function b(){return Object(i.post)("/api/plugins/cancel_all").catch(c.a)}},822:function(e,t,n){var r=n(607),a=n(63),i=n(592),c=Math.max,o=Math.min;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=s-1;return void 0!==n&&(l=i(n),l=n<0?c(s+l,0):o(l,s-1)),r(e,a(t,3),l,!0)}},865:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(534),a=n(535),i=n(536);function c(e){return e.children?r.createElement("div",{className:a("navbar-notif",e.className)},r.createElement("div",{className:"navbar-limited clearfix"},r.createElement("div",{className:a("display-flex-center",{"navbar-notif-cancelable":!!e.onCancel})},e.children,e.onCancel&&r.createElement(i.c,{className:"button-small",onClick:e.onCancel})))):null}},959:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(779);var a=function(){return function(e){Object(r.e)().then(function(t){e(function(e){return{type:"SET_PENDING_PLUGINS",pending:e}}(t))},function(){})}}},960:function(e,t,n){"use strict";var r,a=n(534),i=n(535),c=n(663),o=n(548),s=n(536),l=n(7),u=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={restarting:!1},t.handleFormSubmit=function(e){e.preventDefault(),t.state.restarting||(t.setState({restarting:!0}),Object(c.g)().then(function(){return document.location.reload()},function(){return t.setState({restarting:!1})}))},t}return u(t,e),t.prototype.render=function(){var e=this.state.restarting,t=Object(l.l)("system.restart_server");return a.createElement(o.a,{contentLabel:t,onRequestClose:e?void 0:this.props.onClose},a.createElement("form",{id:"restart-form",onSubmit:this.handleFormSubmit},a.createElement("div",{className:"modal-head"},a.createElement("h2",null,t)),a.createElement("div",{className:"modal-body"},a.createElement("p",{className:i("spacer-top spacer-bottom",{"text-center":e})},Object(l.l)(e?"system.is_restarting":"system.are_you_sure_to_restart")),e&&a.createElement("p",{className:"big-spacer-top spacer-bottom text-center"},a.createElement("i",{className:"spinner"}))),!e&&a.createElement("div",{className:"modal-foot"},a.createElement(s.f,{id:"restart-server-submit"},Object(l.l)("restart")),a.createElement(s.e,{className:"js-modal-close",id:"restart-server-cancel",onClick:this.props.onClose},Object(l.l)("cancel")))))},t}(a.PureComponent);t.a=p}}]);
//# sourceMappingURL=354.ba79dea5.chunk.js.map