(window.webpackJsonp=window.webpackJsonp||[]).push([[264],{1558:function(e,n,t){"use strict";t.r(n);var r,o=t(534),i=t.n(o),s=t(557),u=t.n(s),c=t(544),p=t(7),a=t(545),l=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},function(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),f=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(){var e=this.props.organization?Object(p.l)("permissions.page"):Object(p.l)("global_permissions.page"),n=this.props.organization?Object(p.l)("organization_permissions.page.description"):Object(p.l)("global_permissions.page.description");return i.a.createElement("header",{className:"page-header"},i.a.createElement("h1",{className:"page-title"},e),this.props.loading&&i.a.createElement("i",{className:"spinner"}),i.a.createElement("div",{className:"page-description"},n))},n.defaultProps={loading:!1},n}(i.a.PureComponent),g=Object(c.connect)(function(e){return{loading:Object(a.isPermissionsAppLoading)(e)}})(f),m=t(907),h=t(879),y=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),O=["admin","profileadmin","gateadmin","scan","provisioning"],d=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleToggleUser=function(e,t){return e.permissions.includes(t)?n.props.revokePermissionFromUser(e.login,t):n.props.grantPermissionToUser(e.login,t)},n.handleToggleGroup=function(e,t){return e.permissions.includes(t)?n.props.revokePermissionFromGroup(e.name,t):n.props.grantPermissionToGroup(e.name,t)},n}return y(n,e),n.prototype.componentDidMount=function(){this.props.loadHolders()},n.prototype.render=function(){var e=this.props.organization?"organizations_permissions":"global_permissions",n=O.map(function(n){return{key:n,name:Object(p.l)(e,n),description:Object(p.l)(e,n,"desc")}});return o.createElement(h.a,{groups:this.props.groups,onSelectPermission:this.props.onSelectPermission,onToggleGroup:this.handleToggleGroup,onToggleUser:this.handleToggleUser,permissions:n,selectedPermission:this.props.selectedPermission,users:this.props.users},o.createElement(m.a,{filter:this.props.filter,onFilter:this.props.onFilter,onSearch:this.props.onSearch,query:this.props.query}))},n}(o.PureComponent),b=t(662),j=t(17),P=t(685),_=function(e){return function(n,t){var r=Object(a.getPermissionsAppQuery)(t()),o=Object(a.getPermissionsAppFilter)(t()),i=Object(a.getPermissionsAppSelectedPermission)(t());n({type:P.e,query:r});var s=[];return"groups"!==o?s.push(b.i(r,i,e)):s.push(Promise.resolve([])),"users"!==o?s.push(b.h(r,i,e)):s.push(Promise.resolve([])),Promise.all(s).then(function(e){return n({type:P.d,users:e[0],groups:e[1],query:r})}).catch(function(e){return Object(j.parseError)(e).then(function(e){return n(Object(P.k)(e))})})}},v=Object(c.connect)(function(e){return{filter:Object(a.getPermissionsAppFilter)(e),groups:Object(a.getPermissionsAppGroups)(e),query:Object(a.getPermissionsAppQuery)(e),selectedPermission:Object(a.getPermissionsAppSelectedPermission)(e),users:Object(a.getPermissionsAppUsers)(e)}},function(e,n){var t=n.organization?n.organization.key:void 0;return{grantPermissionToGroup:function(n,r){return e(function(e,n,t){return function(r){return b.o(null,e,n,t).then(function(){r({type:P.b,groupName:e,permission:n})}).catch(function(e){return Object(j.parseError)(e).then(function(e){return r(Object(P.k)(e))})})}}(n,r,t))},grantPermissionToUser:function(n,r){return e(function(e,n,t){return function(r){return b.p(null,e,n,t).then(function(){r({type:P.c,login:e,permission:n})}).catch(function(e){return Object(j.parseError)(e).then(function(e){return r(Object(P.k)(e))})})}}(n,r,t))},loadHolders:function(){return e(_(t))},onFilter:function(n){return e(function(e,n){return function(t){t({type:P.i,filter:e}),t(_(n))}}(n,t))},onSearch:function(n){return e(function(e,n){return void 0===e&&(e=""),function(t){t({type:P.j,query:e}),t(_(n))}}(n,t))},onSelectPermission:function(n){return e(function(e,n){return function(t,r){t(Object(a.getPermissionsAppSelectedPermission)(r())!==e?{type:P.h,permission:e}:{type:P.h,permission:null}),t(_(n))}}(n,t))},revokePermissionFromGroup:function(n,r){return e(function(e,n,t){return function(r){return b.t(null,e,n,t).then(function(){r({type:P.f,groupName:e,permission:n})}).catch(function(e){return Object(j.parseError)(e).then(function(e){return r(Object(P.k)(e))})})}}(n,r,t))},revokePermissionFromUser:function(n,r){return e(function(e,n,t){return function(r){return b.u(null,e,n,t).then(function(){r({type:P.g,login:e,permission:n})}).catch(function(e){return Object(j.parseError)(e).then(function(e){return r(Object(P.k)(e))})})}}(n,r,t))}}})(d),E=t(906),w=t(555),z=t(694);t(905);n.default=Object(z.a)(function(e){var n=e.organization;return o.createElement("div",{className:"page page-limited"},o.createElement(w.a,{suggestions:"global_permissions"}),o.createElement(u.a,{title:Object(p.l)("global_permissions.permission")}),o.createElement(g,{organization:n}),o.createElement(E.a,null),o.createElement(v,{organization:n}))})},555:function(e,n,t){"use strict";var r,o=t(534),i=t(538),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},function(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return s(n,e),n.prototype.componentDidMount=function(){this.context.suggestions.addSuggestions(this.props.suggestions)},n.prototype.componentDidUpdate=function(e){e.suggestions!==this.props.suggestions&&(this.context.suggestions.removeSuggestions(this.props.suggestions),this.context.suggestions.addSuggestions(e.suggestions))},n.prototype.componentWillUnmount=function(){this.context.suggestions.removeSuggestions(this.props.suggestions)},n.prototype.render=function(){return null},n.contextTypes={suggestions:i.object.isRequired},n}(o.PureComponent);n.a=u},694:function(e,n,t){"use strict";t.d(n,"a",function(){return l});var r,o=t(534),i=t(544),s=t(541),u=t(545),c=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},function(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),p=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},a=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&(t[r[o]]=e[r[o]])}return t};function l(e){var n=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return c(t,n),t.prototype.render=function(){var n=this.props,t=n.customOrganizations,r=n.router,i=a(n,["customOrganizations","router"]);return!i.params.organizationKey&&t?(r.replace("/not_found"),null):o.createElement(e,p({},i))},t.displayName="forSingleOrganization("+e.displayName+")}",t}(o.Component);return Object(i.connect)(function(e){return{customOrganizations:Object(u.areThereCustomOrganizations)(e)}})(Object(s.withRouter)(n))}},906:function(e,n,t){"use strict";var r=t(534),o=t(544),i=t(545);n.a=Object(o.connect)(function(e){return{message:Object(i.getPermissionsAppError)(e)}})(function(e){var n=e.message;return n?r.createElement("div",{className:"alert alert-danger"},n):null})}}]);
//# sourceMappingURL=264.e68030aa.chunk.js.map