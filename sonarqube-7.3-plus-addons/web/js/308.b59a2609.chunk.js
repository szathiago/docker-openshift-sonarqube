(window.webpackJsonp=window.webpackJsonp||[]).push([[308],{1601:function(t,e,n){"use strict";n.r(e),n.d(e,"OrganizationEdit",function(){return m});var a,r=n(591),i=n.n(r),o=n(534),c=n(557),u=n.n(c),l=n(544),s=n(7),d=n(619),g=n(536),f=(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(e){var n=t.call(this,e)||this;return n.mounted=!1,n.handleAvatarInputChange=function(t){var e=t.target.value;n.setState({avatar:e}),n.changeAvatarImage(e)},n.changeAvatarImage=function(t){n.setState({avatarImage:t})},n.handleSubmit=function(t){t.preventDefault();var e={avatar:n.state.avatar,description:n.state.description,name:n.state.name,url:n.state.url};n.setState({loading:!0}),n.props.updateOrganization(n.props.organization.key,e).then(n.stopLoading,n.stopLoading)},n.stopLoading=function(){n.mounted&&n.setState({loading:!1})},n.state={loading:!1,avatar:e.organization.avatar||"",avatarImage:e.organization.avatar||"",description:e.organization.description||"",name:e.organization.name,url:e.organization.url||""},n.changeAvatarImage=i()(n.changeAvatarImage,500),n}return f(e,t),e.prototype.componentDidMount=function(){this.mounted=!0},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.render=function(){var t=this,e=Object(s.l)("organization.edit");return o.createElement("div",{className:"page page-limited"},o.createElement(u.a,{title:e}),o.createElement("header",{className:"page-header"},o.createElement("h1",{className:"page-title"},e)),o.createElement("div",{className:"boxed-group boxed-group-inner"},o.createElement("form",{onSubmit:this.handleSubmit},o.createElement("div",{className:"modal-field"},o.createElement("label",{htmlFor:"organization-name"},Object(s.l)("organization.name"),o.createElement("em",{className:"mandatory"},"*")),o.createElement("input",{disabled:this.state.loading,id:"organization-name",maxLength:64,name:"name",onChange:function(e){return t.setState({name:e.target.value})},required:!0,type:"text",value:this.state.name}),o.createElement("div",{className:"modal-field-description"},Object(s.l)("organization.name.description"))),o.createElement("div",{className:"modal-field"},o.createElement("label",{htmlFor:"organization-avatar"},Object(s.l)("organization.avatar")),o.createElement("input",{disabled:this.state.loading,id:"organization-avatar",maxLength:256,name:"avatar",onChange:this.handleAvatarInputChange,type:"text",value:this.state.avatar}),o.createElement("div",{className:"modal-field-description"},Object(s.l)("organization.avatar.description")),!!this.state.avatarImage&&o.createElement("div",{className:"spacer-top spacer-bottom"},o.createElement("div",{className:"little-spacer-bottom"},Object(s.l)("organization.avatar.preview"),":"),o.createElement("img",{alt:"",height:30,src:this.state.avatarImage}))),o.createElement("div",{className:"modal-field"},o.createElement("label",{htmlFor:"organization-description"},Object(s.l)("description")),o.createElement("textarea",{disabled:this.state.loading,id:"organization-description",maxLength:256,name:"description",onChange:function(e){return t.setState({description:e.target.value})},rows:3,value:this.state.description}),o.createElement("div",{className:"modal-field-description"},Object(s.l)("organization.description.description"))),o.createElement("div",{className:"modal-field"},o.createElement("label",{htmlFor:"organization-url"},Object(s.l)("organization.url")),o.createElement("input",{disabled:this.state.loading,id:"organization-url",maxLength:256,name:"url",onChange:function(e){return t.setState({url:e.target.value})},type:"text",value:this.state.url}),o.createElement("div",{className:"modal-field-description"},Object(s.l)("organization.url.description"))),o.createElement("div",{className:"modal-field"},o.createElement(g.f,{disabled:this.state.loading},Object(s.l)("save")),this.state.loading&&o.createElement("i",{className:"spinner spacer-left"})))))},e}(o.PureComponent),p={updateOrganization:d.i};e.default=Object(l.connect)(null,p)(m)},595:function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return c}),n.d(e,"e",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"g",function(){return s}),n.d(e,"c",function(){return d});var a=n(17),r=n(552);function i(t){return Object(a.getJSON)("/api/user_groups/search",t).catch(r.a)}function o(t){return Object(a.getJSON)("/api/user_groups/users",t).catch(r.a)}function c(t){return Object(a.post)("/api/user_groups/add_user",t).catch(r.a)}function u(t){return Object(a.post)("/api/user_groups/remove_user",t).catch(r.a)}function l(t){return Object(a.postJSON)("/api/user_groups/create",t).then(function(t){return t.group},r.a)}function s(t){return Object(a.post)("/api/user_groups/update",t).catch(r.a)}function d(t){return Object(a.post)("/api/user_groups/delete",t).catch(r.a)}},619:function(t,e,n){"use strict";n.d(e,"e",function(){return f}),n.d(e,"f",function(){return m}),n.d(e,"b",function(){return p}),n.d(e,"i",function(){return h}),n.d(e,"c",function(){return b}),n.d(e,"g",function(){return O}),n.d(e,"d",function(){return j}),n.d(e,"a",function(){return z}),n.d(e,"h",function(){return E}),n.d(e,"j",function(){return N});var a=n(610),r=n(644),i=n(676),o=n(595),c=n(616),u=n(588),l=n(545),s=n(582),d=n(7),g=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},f=function(t){return function(e){return Promise.all([a.d(t),a.f(t)]).then(function(t){var n=t[0],a=t[1];if(n){var i=g({},n,a);e(r.i([i]))}},Object(u.f)(e))}},m=function(t){return function(e){return Object(o.f)({organization:t}).then(function(n){e(r.h(t,n.groups))},Object(u.f)(e))}},p=function(t){return function(e){return a.b(t).then(function(t){return e(r.a(t)),e(Object(s.b)(Object(d.m)("organization.created",t.name))),t},function(t){return function(e){return Object(u.f)(t)(e),Promise.reject(e)}}(e))}},h=function(t,e){return function(n){return a.j(t,e).then(function(){n(r.j(t,e)),n(Object(s.b)(Object(d.l)("organization.updated")))},Object(u.f)(n))}},b=function(t){return function(e){return a.c(t).then(function(){e(r.c(t)),e(Object(s.b)(Object(d.l)("organization.deleted")))},Object(u.f)(e))}},v=function(t,e,n){return e(i.f(t.organization,{loading:!0})),void 0===t.ps&&(t.ps=50),t.q||(t.q=void 0),a.i(t).then(function(a){e(n(t.organization,a.users,{loading:!1,total:a.paging.total,pageIndex:a.paging.pageIndex,query:t.q||null}))},function(n){Object(u.f)(e)(n),e(i.f(t.organization,{loading:!1}))})},O=function(t,e){return function(n){return v({organization:t,q:e},n,i.c)}},j=function(t,e){return function(n,a){return v({organization:t,p:Object(l.getOrganizationMembersState)(a(),t).pageIndex+1,q:e},n,i.d)}},z=function(t,e){return function(n){return a.a({login:e.login,organization:t}).then(function(e){return n(i.b(t,e))},Object(u.f)(n))}},E=function(t,e){return function(n){return n(i.e(t,e)),a.h({login:e.login,organization:t}).catch(function(a){Object(u.f)(n)(a),n(i.b(t,e))})}},N=function(t,e,n,a){return function(r){r(Object(c.f)(g({},e,{groupCount:(e.groupCount||0)+n.length-a.length})));var i=n.map(function(n){return Object(o.a)({name:n,login:e.login,organization:t.key})}).concat(a.map(function(n){return Object(o.e)({name:n,login:e.login,organization:t.key})}));return Promise.all(i).catch(function(t){r(Object(c.f)(e)),Object(u.f)(r)(t)})}}}}]);
//# sourceMappingURL=308.b59a2609.chunk.js.map